{% extends "base.html" %}
{% block title %}pyTicket - Dashboard{% endblock %}
{% block content %}

<h1>Dashboard</h1>
<p>Welcome, {{ username }}!</p>
<p>Email: {{ email }}</p>
<div class="card w-50">
    <div class="card-body">
      <h5 class="card-title">Open Tickets:</h5>
      <ul>
        {% for ticket in open_tickets %}
            <li> <div class="card" style="width: 18rem;">
              <div class="card-body">
                <h5 class="card-title">{{ ticket.title }}</h5>
                <h6 class="card-subtitle mb-2 text-body-secondary">Date: {{ ticket.date.strftime('%Y-%m-%d %H:%M:%S') }}</h6>
                <p class="card-text"><a href="{{ url_for('ticket', ticket_id=ticket.id) }}">{{ ticket.title }}</a></p>
                <p class="card-text">Assignee: {{ ticket.assignee.username }}</p>
                <p class="card-text">Creator: {{ ticket.creator.username }}</p>
              </div>
            </div>
      </li>
        {% endfor %}
    </ul>
      <a href="{{ url_for('create_ticket') }}" class="btn btn-primary">New Ticket</a>
    </div>
  </div>
{% with messages = get_flashed_messages() %}
{% if messages %}
    <ul class="flashes">
        {% for message in messages %}
            <li>{{ message }}</li>
        {% endfor %}
    </ul>
{% endif %}
{% endwith %}

{% endblock %}

  
